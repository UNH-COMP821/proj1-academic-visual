{% extends 'universitytransfer/base.html' %}
{% load static %}

<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}Welcome Home NHTI {% endblock %}</title>
</head>
<body>
    {% block javascript %}
    <script>
        $('#departmentDp').change(function () {
          var departmentId = $(this).val();
          
          var school_id = "{{ schoolId }}";
          $.ajax({
            url: '/ajax/getcourse/',
            data: {
              'school_id': school_id,
              'department_id': departmentId,
            },
            dataType: 'json',
            success: function (data) {
                var courses = JSON.parse(data.course_map)
                //alert(data.course_map)
                courses = JSON.parse(courses)
                //alert(courses)
                loadTable("data-table",courses);
            }
          });
    
        });

        function loadTable(tableId, data) {
          //$('#' + tableId).empty(); //not really necessary
          //alert("inside loadTable");
          //alert(typeof data)
          //alert(data)
          var rows = '';
          
          rows+= '<tr><th>Course</th><th>UNH Equivalent</th></tr>';

          $.each(data, function(index, item) {
              //alert(item['course'])
              var row = '<tr>';
              row += '<td>' + item['course'] + '</td>';
              row += '<td>' + item['unh_map'] + '</td>';
              //alert(item['course']+ ":"+ item['unh_map']);
              rows += row + '<tr>';
          });
          $('#' + tableId).html(rows);
      }
      </script>
    {% endblock %}

  {% block pagecontent %}
  
  <img alt="smiley" style="" src="{% static 'universitytransfer/images/concord.svg' %}" usemap="#G" alt="graphviz graph" />
  <map id="G" name="G">
      <area shape="poly" id="node1" href="https://www.nhtransfer.org/sites/nhtransfer.org/files/media/nhtransferapplication.pdf" title="Transfer" alt="" coords="425,317,422,310,415,303,402,298,387,295,370,293,353,295,337,298,325,303,317,310,314,317,317,325,325,331,337,337,353,340,370,341,387,340,402,337,415,331,422,325"/>
      <area shape="poly" id="node5" href="/" title="Apply" alt="" coords="414,413,412,406,405,399,396,394,383,391,370,389,356,391,344,394,334,399,328,406,326,413,328,421,334,427,344,433,356,436,370,437,383,436,396,433,405,427,412,421"/>
      <area shape="poly" id="node2" href="https://manchester.unh.edu/costs" title="Compare Tuition Cost" alt="" coords="698,317,692,310,674,303,647,298,612,295,574,293,535,295,501,298,473,303,456,310,450,317,456,325,473,331,501,337,535,340,574,341,612,340,647,337,674,331,692,325"/>
      <area shape="poly" id="node4" href="/index.html" title="Nashua Community College" alt="" coords="621,29,614,22,592,15,559,10,517,7,471,5,425,7,383,10,350,15,328,22,321,29,328,37,350,43,383,49,425,52,471,53,517,52,559,49,592,43,614,37"/>
  </map>

<p>
  Select major:
  <form>
    
  <select id="departmentDp">    
      {% for department in departmentList %}
          <option value="{{ department.id}}">{{ department.name }}</option>
      {% endfor %}
    </select>
  </form>

</p>
<p>
  <table id="data-table" border="1">
    
  </table>
</p>

  <p>" This page will redirect you to NHTI."
  </p>

  
  
  {% include 'partials/nav-bar.html' %} <!--Add this-->

  {% endblock %}

</body>


</html>
